<div class="container">
  <h1>Post Data Table</h1>

  <!-- Search Box -->
  <div class="search-box">
    <input
      type="text"
      placeholder="Search by title"
      [(ngModel)]="searchTerm"
      (input)="onSearch()"
      class="search-input"
    />
  </div>

  <!-- Posts Table -->
  <table mat-table [dataSource]="filteredPosts" multiTemplateDataRows class="mat-elevation-z8">
    
    <!-- ID Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> ID </th>
      <td mat-cell *matCellDef="let post"> {{ post.id }} </td>
    </ng-container>

    <!-- Title Column -->
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef> Title </th>
      <td mat-cell *matCellDef="let post">
        <span (click)="toggleExpand(post)" style="cursor: pointer;">{{ post.title }}</span>
        <div *ngIf="isExpanded(post)" class="expanded-content">
          <p><strong>ID:</strong> {{ post.id }}</p>
          <p><strong>Body:</strong> {{ post.body }}</p>
          
        </div>
      </td>
    </ng-container>

    <!-- Expand Button Column -->
    <ng-container matColumnDef="expand">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let post">
          <button (click)="editPost(post)">Edit</button>
          <button (click)="deletePost(post)">Delete</button>
      </td>
    </ng-container>

    

    <!-- Header Row -->
    <tr mat-header-row *matHeaderRowDef="columnsToDisplayWithExpand"></tr>

    <!-- Data Row -->
    <tr mat-row *matRowDef="let post; columns: columnsToDisplayWithExpand;" (click)="toggleExpand(post)"></tr>
  </table>
</div>
